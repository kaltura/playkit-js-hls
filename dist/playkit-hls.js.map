{"version":3,"sources":["./hls/webpack/universalModuleDefinition","./hls/webpack/bootstrap 8223b87b051b6992e4dd","./hls/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}","./hls/./index.js","./hls/./hls-adapter.js","./hls/external {\"commonjs\":\"hls.js\",\"commonjs2\":\"hls.js\",\"amd\":\"hls.js\",\"root\":\"Hls\"}"],"names":["VERSION","NAME","isSupported","HlsAdapter","videoElement","source","config","hlsConfig","Object","hasPropertyPath","playback","options","html5","hls","mimeType","canHlsPlayType","_hlsMimeTypes","includes","toLowerCase","_logger","debug","toString","warn","isHlsSupported","version","_hls","_config","_addBindings","on","Events","ERROR","_onError","bind","MANIFEST_LOADED","_onManifestLoaded","LEVEL_SWITCHED","_onLevelSwitched","AUDIO_TRACK_SWITCHED","_onAudioTrackSwitched","startTime","_loadPromise","Promise","resolve","onLevelUpdated","off","LEVEL_UPDATED","tracks","_playerTracks","startPosition","_sourceObj","url","loadSource","attachMedia","_videoElement","_trigger","CustomEvents","ABR_MODE_CHANGED","mode","isAdaptiveBitrateEnabled","then","_removeBindings","detachMedia","destroy","data","audioTracks","_parseAudioTracks","videoTracks","_parseVideoTracks","levels","textTracks","_parseTextTracks","subtitleTracks","concat","hlsAudioTracks","i","length","settings","id","active","audioTrack","label","name","language","lang","index","push","hlsVideoTracks","startLevel","bandwidth","bitrate","width","height","hlsTextTracks","default","kind","type","videoTrack","currentLevel","textTrack","_disableAllTextTracks","_onTrackChanged","nextLevel","autoLevelEnabled","liveEdge","liveSyncDuration","duration","liveSyncDurationCount","details","targetduration","e","NaN","currentTime","_getLiveEdge","live","event","startLoad","_parseTracks","find","track","level","vidTextTracks","errorType","errorDetails","errorFatal","fatal","ErrorTypes","NETWORK_ERROR","error","MEDIA_ERROR","recoverMediaError","ErrorDetails","MANIFEST_LOAD_ERROR","MANIFEST_LOAD_TIMEOUT","MANIFEST_PARSING_ERROR","LEVEL_LOAD_ERROR","LEVEL_LOAD_TIMEOUT","LEVEL_SWITCH_ERROR","FRAG_LOAD_ERROR","FRAG_LOOP_LOADING_ERROR","FRAG_LOAD_TIMEOUT","FRAG_PARSING_ERROR","BUFFER_APPEND_ERROR","BUFFER_APPENDING_ERROR","isLive","getLogger"],"mappings":"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","file":"playkit-hls.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"), require(\"hls.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\", \"hls.js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PlaykitJsHls\"] = factory(require(\"playkit-js\"), require(\"hls.js\"));\n\telse\n\t\troot[\"PlaykitJsHls\"] = factory(root[\"Playkit\"], root[\"Hls\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8223b87b051b6992e4dd","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}\n// module id = 0\n// module chunks = 0","// @flow\nimport {registerMediaSourceAdapter} from 'playkit-js'\nimport HlsAdapter from'./hls-adapter'\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nexport default HlsAdapter;\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\n\n// Register hls adapter to the media source adapter provider.\nif (HlsAdapter.isSupported()) {\n  registerMediaSourceAdapter(HlsAdapter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//@flow\nimport Hlsjs from 'hls.js'\nimport {BaseMediaSourceAdapter} from 'playkit-js'\nimport {Track, VideoTrack, AudioTrack, TextTrack} from 'playkit-js'\nimport {Utils} from 'playkit-js'\n\n/**\n * Adapter of hls.js lib for hls content.\n * @classdesc\n */\nexport default class HlsAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the adapter.\n   * @member {string} id\n   * @static\n   * @private\n   */\n  static id: string = 'HlsAdapter';\n  /**\n   * The adapter logger.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(HlsAdapter.id);\n  /**\n   * The supported mime types by the hls adapter.\n   * @member {Array<string>} _hlsMimeType\n   * @static\n   * @private\n   */\n  static _hlsMimeTypes: Array<string> = [\n    'application/x-mpegurl',\n    'application/vnd.apple.mpegurl',\n    'audio/mpegurl',\n    'audio/x-mpegurl',\n    'video/x-mpegurl',\n    'video/mpegurl',\n    'application/mpegurl'\n  ];\n  /**\n   * The hls player instance.\n   * @member {any} _hls\n   * @private\n   */\n  _hls: any;\n  /**\n   * The load promise\n   * @member {Promise<Object>} - _loadPromise\n   * @type {Promise<Object>}\n   * @private\n   */\n  _loadPromise: ?Promise<Object>;\n  /**\n   * Reference to the player tracks.\n   * @member {Array<Track>} - _playerTracks\n   * @type {Array<Track>}\n   * @private\n   */\n  _playerTracks: Array<Track>;\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {Object} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: Source, config: Object): IMediaSourceAdapter {\n    let hlsConfig = {};\n    if (Utils.Object.hasPropertyPath(config, 'playback.options.html5.hls')) {\n      hlsConfig = config.playback.options.html5.hls;\n    }\n    return new this(videoElement, source, hlsConfig);\n  }\n\n  /**\n   * Checks if hls adapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check.\n   * @returns {boolean} - Whether the hls adapter can play a specific mime type.\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canHlsPlayType = (typeof mimeType === 'string') ? HlsAdapter._hlsMimeTypes.includes(mimeType.toLowerCase()) : false;\n    HlsAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canHlsPlayType.toString());\n    return canHlsPlayType;\n  }\n\n  /**\n   * Checks if hls adapter can play a given drm data.\n   * For hls.js it always returns false.\n   * @returns {boolean} - Whether the hls adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(): boolean {\n    HlsAdapter._logger.warn('canPlayDrm result is false');\n    return false;\n  }\n\n  /**\n   * Checks if the hls adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether hls is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    let isHlsSupported = Hlsjs.isSupported();\n    HlsAdapter._logger.debug('isSupported:' + isHlsSupported);\n    return isHlsSupported;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which will bind to the hls adapter\n   * @param {Object} source - The source object\n   * @param {Object} config - The media source adapter configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: Source, config: Object) {\n    HlsAdapter._logger.debug('Creating adapter. Hls version: ' + Hlsjs.version);\n    super(videoElement, source, config);\n    this._hls = new Hlsjs(this._config);\n    this._addBindings();\n  }\n\n  /**\n   * Adds the required bindings with hls.js.\n   * @function _addBindings\n   * @private\n   * @returns {void}\n   */\n  _addBindings(): void {\n    this._hls.on(Hlsjs.Events.ERROR, this._onError.bind(this));\n    this._hls.on(Hlsjs.Events.MANIFEST_LOADED, this._onManifestLoaded.bind(this));\n    this._hls.on(Hlsjs.Events.LEVEL_SWITCHED, this._onLevelSwitched.bind(this));\n    this._hls.on(Hlsjs.Events.AUDIO_TRACK_SWITCHED, this._onAudioTrackSwitched.bind(this));\n  }\n\n  /**\n   * Load the video source\n   * @function load\n   * @param {number} startTime - Optional time to start the video from.\n   * @returns {Promise<Object>} - The loaded data\n   * @override\n   */\n  load(startTime: ?number): Promise<Object> {\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve) => {\n        let onLevelUpdated = () => {\n          this._hls.off(Hlsjs.Events.LEVEL_UPDATED, onLevelUpdated);\n          resolve({tracks: this._playerTracks});\n        };\n        this._hls.on(Hlsjs.Events.LEVEL_UPDATED, onLevelUpdated);\n        if (startTime) {\n          this._hls.startPosition = startTime;\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._hls.loadSource(this._sourceObj.url);\n          this._hls.attachMedia(this._videoElement);\n          this._trigger(BaseMediaSourceAdapter.CustomEvents.ABR_MODE_CHANGED, {mode: this.isAdaptiveBitrateEnabled() ? 'auto' : 'manual'});\n        }\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Destroys the hls adapter.\n   * @function destroy\n   * @override\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    return super.destroy().then(() => {\n      HlsAdapter._logger.debug('destroy');\n      this._loadPromise = null;\n      this._playerTracks = [];\n      this._removeBindings();\n      this._hls.detachMedia();\n      this._hls.destroy();\n    });\n  }\n\n  /**\n   * Parse the hls tracks into player tracks.\n   * @param {any} data - The event data.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @private\n   */\n  _parseTracks(data: any): Array<Track> {\n    let audioTracks = this._parseAudioTracks(data.audioTracks || []);\n    let videoTracks = this._parseVideoTracks(data.levels || []);\n    let textTracks = this._parseTextTracks(this._hls.subtitleTracks|| []);\n    return audioTracks.concat(videoTracks).concat(textTracks);\n  }\n\n  /**\n   * Parse hls audio tracks into player audio tracks.\n   * @param {Array<Object>} hlsAudioTracks - The hls audio tracks.\n   * @returns {Array<AudioTrack>} - The parsed audio tracks.\n   * @private\n   */\n  _parseAudioTracks(hlsAudioTracks: Array<Object>): Array<AudioTrack> {\n    let audioTracks = [];\n    for (let i = 0; i < hlsAudioTracks.length; i++) {\n      // Create audio tracks\n      let settings = {\n        id: hlsAudioTracks[i].id,\n        active: this._hls.audioTrack === hlsAudioTracks[i].id,\n        label: hlsAudioTracks[i].name,\n        language: hlsAudioTracks[i].lang,\n        index: i\n      };\n      audioTracks.push(new AudioTrack(settings));\n    }\n    return audioTracks;\n  }\n\n  /**\n   * Parse hls video tracks into player video tracks.\n   * @param {Array<Object>} hlsVideoTracks - The hls video tracks.\n   * @returns {Array<VideoTrack>} - The parsed video tracks.\n   * @private\n   */\n  _parseVideoTracks(hlsVideoTracks: Array<Object>): Array<VideoTrack> {\n    let videoTracks = [];\n    for (let i = 0; i < hlsVideoTracks.length; i++) {\n      // Create video tracks\n      let settings = {\n        active: this._hls.startLevel === i,\n        label: hlsVideoTracks[i].name,\n        bandwidth: hlsVideoTracks[i].bitrate,\n        width: hlsVideoTracks[i].width,\n        height: hlsVideoTracks[i].height,\n        language: '',\n        index: i\n      };\n      videoTracks.push(new VideoTrack(settings));\n    }\n    return videoTracks;\n  }\n\n  /**\n   * Parse hls text tracks into player text tracks.\n   * @param {Array<Object>} hlsTextTracks - The hls text tracks.\n   * @returns {Array<TextTrack>} - The parsed text tracks.\n   * @private\n   */\n  _parseTextTracks(hlsTextTracks: Array<Object>): Array<TextTrack> {\n    let textTracks = [];\n    for (let i = 0; i < hlsTextTracks.length; i++) {\n      // Create text tracks\n      let settings = {\n        id: hlsTextTracks[i].id,\n        active: hlsTextTracks[i].default,\n        label: hlsTextTracks[i].name,\n        kind: hlsTextTracks[i].type.toLowerCase(),\n        language: hlsTextTracks[i].lang,\n        index: i\n      };\n      textTracks.push(new TextTrack(settings));\n    }\n    return textTracks;\n  }\n\n  /**\n   * Select an audio track.\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the audio track to select.\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (audioTrack instanceof AudioTrack && !audioTrack.active && this._hls.audioTracks) {\n      this._hls.audioTrack = audioTrack.id;\n    }\n  }\n\n  /**\n   * Select a video track.\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select.\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (videoTrack instanceof VideoTrack && (!videoTrack.active || this.isAdaptiveBitrateEnabled()) && this._hls.levels) {\n      if (this.isAdaptiveBitrateEnabled()) {\n        this._trigger(BaseMediaSourceAdapter.CustomEvents.ABR_MODE_CHANGED, {mode: 'manual'});\n      }\n      this._hls.currentLevel = videoTrack.index;\n    }\n  }\n\n  /**\n   * Select a text track.\n   * @function selectTextTrack\n   * @param {TextTrack} textTrack - the track to select.\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: TextTrack): void {\n    if (textTrack instanceof TextTrack && !textTrack.active && this._videoElement.textTracks) {\n      this._disableAllTextTracks();\n      this._videoElement.textTracks[textTrack.index].mode = 'hidden';\n      HlsAdapter._logger.debug('Text track changed', textTrack);\n      this._onTrackChanged(textTrack);\n    }\n  }\n\n  /** Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this._disableAllTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to hls.js logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (!this.isAdaptiveBitrateEnabled()) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.ABR_MODE_CHANGED, {mode: 'auto'});\n      this._hls.nextLevel = -1;\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return this._hls.autoLevelEnabled;\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    try {\n      let liveEdge;\n      if (this._hls.config.liveSyncDuration) {\n        liveEdge = this._videoElement.duration - this._hls.config.liveSyncDuration;\n      } else {\n        liveEdge = this._videoElement.duration - this._hls.config.liveSyncDurationCount * this._hls.levels[0].details.targetduration;\n      }\n      return liveEdge > 0 ? liveEdge : 0;\n    } catch (e) {\n      return NaN;\n    }\n  }\n\n  /**\n   * Seeking to live edge, calculated according hls configuration - liveSyncDuration or liveSyncDurationCount.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch (e) {\n      return;\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    try {\n      return this._hls.levels[0].details.live;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * Fired after manifest has been loaded.\n   * @function _onManifestLoaded\n   * @param {string} event - The event name.\n   * @param {any} data - The event data object.\n   * @private\n   * @returns {void}\n   */\n  _onManifestLoaded(event: string, data: any): void {\n    HlsAdapter._logger.debug('The source has been loaded successfully');\n    this._hls.startLoad();\n    this._playerTracks = this._parseTracks(data);\n  }\n\n  /**\n   * Triggers on video track selection (auto or manually) the 'videotrackchanged' event forward.\n   * @function _onLevelSwitched\n   * @param {string} event - The event name.\n   * @param {any} data - The event data object.\n   * @private\n   * @returns {void}\n   */\n  _onLevelSwitched(event: string, data: any): void {\n    let videoTrack = this._playerTracks.find((track) => {\n      return (track instanceof VideoTrack && track.index === data.level);\n    });\n    HlsAdapter._logger.debug('Video track changed', videoTrack);\n    this._onTrackChanged(videoTrack);\n  }\n\n  /**\n   * Triggers on audio track selection (auto or manually) the 'audiotrackchanged' event forward.\n   * @function _onAudioTrackSwitched\n   * @param {string} event - The event name.\n   * @param {any} data - The event data object.\n   * @private\n   * @returns {void}\n   */\n  _onAudioTrackSwitched(event: string, data: any): void {\n    let audioTrack = this._playerTracks.find((track) => {\n      return (track instanceof AudioTrack && track.id === data.id);\n    });\n    HlsAdapter._logger.debug('Audio track changed', audioTrack);\n    this._onTrackChanged(audioTrack);\n  }\n\n  /**\n   * Disables all the video tag text tracks.\n   * @returns {void}\n   * @private\n   */\n  _disableAllTextTracks() {\n    let vidTextTracks = this._videoElement.textTracks;\n    for (let i = 0; i < vidTextTracks.length; i++) {\n      vidTextTracks[i].mode = 'disabled';\n    }\n  }\n\n  /**\n   * Handles hls errors.\n   * @param {string} event - The event name.\n   * @param {any} data - The event data object.\n   * @private\n   * @returns {void}\n   */\n  _onError(event: string, data: any): void {\n    let errorType = data.type;\n    let errorDetails = data.details;\n    let errorFatal = data.fatal;\n    if (errorFatal) {\n      switch (errorType) {\n        case Hlsjs.ErrorTypes.NETWORK_ERROR:\n          HlsAdapter._logger.error(\"fatal network error encountered, try to recover\");\n          this._hls.startLoad();\n          break;\n        case Hlsjs.ErrorTypes.MEDIA_ERROR:\n          HlsAdapter._logger.error(\"fatal media error encountered, try to recover\");\n          this._hls.recoverMediaError();\n          break;\n        default:\n          HlsAdapter._logger.error(\"fatal error, cannot recover\");\n          this.destroy();\n          break;\n      }\n    } else {\n      switch (errorDetails) {\n        case Hlsjs.ErrorDetails.MANIFEST_LOAD_ERROR:\n        case Hlsjs.ErrorDetails.MANIFEST_LOAD_TIMEOUT:\n        case Hlsjs.ErrorDetails.MANIFEST_PARSING_ERROR:\n        case Hlsjs.ErrorDetails.LEVEL_LOAD_ERROR:\n        case Hlsjs.ErrorDetails.LEVEL_LOAD_TIMEOUT:\n        case Hlsjs.ErrorDetails.LEVEL_SWITCH_ERROR:\n        case Hlsjs.ErrorDetails.FRAG_LOAD_ERROR:\n        case Hlsjs.ErrorDetails.FRAG_LOOP_LOADING_ERROR:\n        case Hlsjs.ErrorDetails.FRAG_LOAD_TIMEOUT:\n        case Hlsjs.ErrorDetails.FRAG_PARSING_ERROR:\n        case Hlsjs.ErrorDetails.BUFFER_APPEND_ERROR:\n        case Hlsjs.ErrorDetails.BUFFER_APPENDING_ERROR:\n          HlsAdapter._logger.error(errorType, errorDetails);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  /**\n   * Removes hls.js bindings.\n   * @returns {void}\n   * @private\n   */\n  _removeBindings(): void {\n    this._hls.off(Hlsjs.Events.ERROR, this._onError);\n    this._hls.off(Hlsjs.Events.LEVEL_SWITCHED, this._onLevelSwitched);\n    this._hls.off(Hlsjs.Events.AUDIO_TRACK_SWITCHED, this._onAudioTrackSwitched);\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * In case the adapter preformed a load it will return the manifest url.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    if (this._loadPromise && this._sourceObj) {\n      return this._sourceObj.url;\n    }\n    return \"\";\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    if (this.isLive()) {\n      return this._getLiveEdge();\n    } else {\n      return super.duration;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./hls-adapter.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"hls.js\",\"commonjs2\":\"hls.js\",\"amd\":\"hls.js\",\"root\":\"Hls\"}\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}